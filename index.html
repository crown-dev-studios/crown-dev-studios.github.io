<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>Crown Dev Studios | Brooklyn Software Consultancy | Build. Scale. Succeed.</title>
  <meta name="title" content="Crown Dev Studios | Brooklyn Software Consultancy | Build. Scale. Succeed.">
  <meta name="description" content="Brooklyn-based software consultancy turning complex technical challenges into elegant, scalable solutions. Expert in TypeScript, Golang, React, iOS, Android, AWS, and cloud architecture.">
  <meta name="keywords" content="software consultancy, custom development, technical strategy, system integration, Brooklyn software studio, TypeScript, Golang, React, AWS, GCP, mobile development">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://crown.dev/">
  <meta property="og:title" content="Crown Dev Studios | Brooklyn Software Consultancy">
  <meta property="og:description" content="Brooklyn-based software consultancy turning complex technical challenges into elegant, scalable solutions.">
  <meta property="og:image" content="https://crown.dev/logo-lockup-dark.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://crown.dev/">
  <meta property="twitter:title" content="Crown Dev Studios | Brooklyn Software Consultancy">
  <meta property="twitter:description" content="Brooklyn-based software consultancy turning complex technical challenges into elegant, scalable solutions.">
  <meta property="twitter:image" content="https://crown.dev/logo-lockup-dark.png">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://crown.dev/">

  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://use.typekit.net" crossorigin>
  <link rel="preconnect" href="https://p.typekit.net" crossorigin>
  <link rel="dns-prefetch" href="https://use.typekit.net">

  <!-- Fonts - preload for better caching -->
  <link rel="preload" href="https://use.typekit.net/nkm5lpa.css" as="style">
  <link rel="stylesheet" href="https://use.typekit.net/nkm5lpa.css">

  <!-- Font display swap override for better performance -->
  <style>
    @supports (font-display: swap) {
      @font-face {
        font-family: 'mundial';
        font-display: swap;
      }
    }
  </style>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ProfessionalService",
    "name": "Crown Dev Studios",
    "image": "https://crown.dev/logo-lockup-dark.png",
    "description": "Brooklyn-based software consultancy turning complex technical challenges into elegant, scalable solutions.",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Brooklyn",
      "addressRegion": "NY",
      "addressCountry": "US"
    },
    "url": "https://crown.dev",
    "email": "hi@crown.dev",
    "priceRange": "$$$$",
    "areaServed": {
      "@type": "Country",
      "name": "United States"
    },
    "serviceType": [
      "Custom Software Development",
      "Technical Strategy Consulting",
      "System Integration",
      "Performance Optimization",
      "Migration Services",
      "Technical Due Diligence"
    ],
    "knowsAbout": [
      "TypeScript",
      "Golang",
      "Kotlin",
      "Swift",
      "React",
      "Svelte",
      "iOS Development",
      "Android Development",
      "AWS",
      "Google Cloud Platform",
      "Docker",
      "Terraform"
    ]
  }
  </script>

  <style>
    :root {
      --black: #000000;
      --white: #ffffff;
      --gray-100: #f5f5f5;
      --gray-300: #e0e0e0;
      --gray-600: #666666;
      --accent: #ff9533;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: mundial, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--white);
      color: var(--black);
      line-height: 1.5;
      width: 100%;
      position: relative;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 5rem 2rem;
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: var(--white);
      border-bottom: 1px solid var(--gray-300);
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0.5rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      height: 64px;
      width: auto;
    }

    .nav-button {
      background: var(--black);
      color: var(--white);
      border: none;
      padding: 0.75rem 2rem;
      font-family: inherit;
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.2s;
    }

    .nav-button:hover {
      background: var(--accent);
      color: var(--black);
    }

    /* Hero Section */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding-top: 80px;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 5rem;
      align-items: center;
    }

    .hero-content h1 {
      font-size: clamp(3rem, 8vw, 6rem);
      font-weight: 200;
      line-height: 1.1;
      margin-bottom: 2rem;
      letter-spacing: -0.02em;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.8s ease-out 0.2s forwards;
    }

    .hero-content h1 strong {
      font-weight: 700;
      display: block;
    }

    .hero-content p {
      font-size: 1.125rem;
      color: var(--gray-600);
      max-width: 500px;
      margin-bottom: 3rem;
      font-weight: 300;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.8s ease-out 0.4s forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .hero-visual {
      position: relative;
      aspect-ratio: 1;
    }

    #networkCanvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    /* Tech Stack Section */
    .tech-stack {
      padding: 4rem 0;
      border-top: 1px solid var(--gray-300);
      border-bottom: 1px solid var(--gray-300);
    }

    .tech-stack .section-title {
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      margin-bottom: 2rem;
      color: var(--gray-600);
      text-align: center;
    }

    .tech-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
      max-width: 900px;
      margin: 0 auto;
    }

    .tech-item {
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--black);
      padding: 0.75rem 1.5rem;
      border: 1px solid var(--gray-300);
      transition: all 0.2s;
    }

    .tech-item:hover {
      border-color: var(--black);
      transform: translateY(-2px);
    }

    /* Services Grid */
    .services {
      padding: 8rem 0;
      background: var(--gray-100);
    }

    .section-title {
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      margin-bottom: 4rem;
      color: var(--gray-600);
    }

    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 3rem;
    }

    .service-card {
      background: var(--black);
      padding: 3rem;
      border: 2px solid var(--black);
      position: relative;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
    }

    @media (max-width: 968px) {
      .services-grid {
        display: block;
      }

      .service-card {
        position: sticky;
        top: 100px;
        margin-bottom: 1rem;
      }
    }

    .service-card::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: var(--white);
      transform: scaleY(0);
      transform-origin: bottom;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 0;
    }

    @media (min-width: 969px) {
      .service-card:hover::after {
        transform: scaleY(1);
      }

      .service-card:hover {
        transform: translateY(-8px);
        box-shadow: 12px 12px 0 var(--accent);
      }

      .service-card:hover .service-number,
      .service-card:hover h3,
      .service-card:hover p {
        color: var(--black);
        position: relative;
        z-index: 1;
      }

      .service-card:hover .service-number {
        color: var(--accent);
      }
    }

    .service-number {
      font-size: 3rem;
      font-weight: 200;
      color: var(--accent);
      margin-bottom: 1.5rem;
      line-height: 1;
      position: relative;
      z-index: 1;
      transition: color 0.3s;
    }

    .service-card h3 {
      font-size: 1.5rem;
      font-weight: 500;
      margin-bottom: 1rem;
      position: relative;
      z-index: 1;
      transition: color 0.3s;
      color: var(--white);
    }

    .service-card p {
      color: var(--gray-300);
      font-weight: 300;
      line-height: 1.6;
      position: relative;
      z-index: 1;
      transition: color 0.3s;
    }

    /* Process Section */
    .process {
      padding: 8rem 0;
    }

    .process-timeline {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 3rem;
      margin-top: 4rem;
      position: relative;
    }

    .process-timeline::before {
      content: '';
      position: absolute;
      top: 2rem;
      left: 12.5%;
      right: 12.5%;
      height: 1px;
      background: var(--gray-300);
      z-index: 0;
    }

    .process-step {
      text-align: center;
      position: relative;
    }

    .process-number {
      width: 4rem;
      height: 4rem;
      border-radius: 50%;
      background: var(--black);
      color: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 200;
      margin: 0 auto 1.5rem;
      position: relative;
      z-index: 1;
      transition: all 0.3s;
    }

    .process-step:hover .process-number {
      background: var(--accent);
      color: var(--black);
      transform: scale(1.1);
    }

    .process-step h3 {
      font-size: 1.25rem;
      font-weight: 500;
      margin-bottom: 0.75rem;
    }

    .process-step p {
      font-size: 0.9rem;
      color: var(--gray-600);
      font-weight: 300;
      line-height: 1.5;
    }

    @media (max-width: 968px) {
      .process-timeline {
        grid-template-columns: 1fr 1fr;
        gap: 3rem 2rem;
      }

      .process-timeline::before {
        display: none;
      }
    }

    @media (max-width: 640px) {
      .process-timeline {
        grid-template-columns: 1fr;
      }
    }

    /* CTA Section */
    .cta-section {
      padding: 10rem 0;
      text-align: center;
    }

    .cta-section h2 {
      font-size: clamp(2rem, 5vw, 4rem);
      font-weight: 200;
      margin-bottom: 3rem;
      line-height: 1.2;
    }

    .cta-button {
      display: inline-flex;
      align-items: center;
      gap: 1rem;
      background: var(--black);
      color: var(--white);
      border: 2px solid var(--black);
      padding: 1.5rem 3rem;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.2s;
    }

    .cta-button:hover {
      background: var(--white);
      color: var(--black);
    }

    .cta-arrow {
      width: 24px;
      height: 24px;
      transition: transform 0.2s;
    }

    .cta-button:hover .cta-arrow {
      transform: translateX(5px);
    }

    /* Footer */
    footer {
      background: var(--black);
      color: var(--white);
      padding: 4rem 2rem;
    }

    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 4rem;
    }

    .footer-logo {
      height: 48px;
      width: auto;
      margin-bottom: 2rem;
      filter: brightness(0) invert(1);
    }

    .footer-text {
      color: var(--gray-300);
      font-weight: 300;
      max-width: 400px;
    }

    .footer-section h4 {
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 1.5rem;
      opacity: 0.6;
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 0.75rem;
    }

    .footer-links a {
      color: var(--white);
      text-decoration: none;
      font-weight: 300;
      transition: color 0.2s;
    }

    .footer-links a:hover {
      color: var(--accent);
    }

    .footer-bottom {
      max-width: 1400px;
      margin: 3rem auto 0;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      font-size: 0.875rem;
      opacity: 0.6;
    }

    /* Responsive */
    @media (max-width: 968px) {
      .hero-grid {
        grid-template-columns: 1fr;
        gap: 0;
      }

      .hero-visual {
        max-width: 400px;
        margin: 0 auto;
        min-height: 400px;
      }

      .footer-content {
        grid-template-columns: 1fr;
        gap: 3rem;
      }

      .footer-bottom {
        flex-direction: column;
        gap: 1rem;
      }
    }

    @media (max-width: 640px) {
      .container {
        padding: 3rem 1rem;
      }

      .nav-button {
        padding: 0.5rem 1rem;
        font-size: 0.75rem;
      }

      .tech-stack {
        padding: 2rem 0;
      }

      .tech-list {
        gap: 0.75rem;
      }

      .tech-item {
        padding: 0.5rem 1rem;
        font-size: 0.75rem;
      }

      .services {
        padding: 5rem 0;
      }

      .cta-section {
        padding: 5rem 0;
      }

      footer {
        padding: 3rem 1rem;
      }
    }

    /* Modal Dialog */
    .modal {
      padding: 0;
      border: none;
      max-width: 600px;
      width: 90%;
      background: var(--white);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      margin: 0;
    }

    .modal::backdrop {
      background: rgba(0, 0, 0, 0.8);
      -webkit-backdrop-filter: blur(4px);
      backdrop-filter: blur(4px);
    }

    .modal-content {
      padding: 3rem;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--gray-300);
    }

    .modal-title {
      font-size: 2rem;
      font-weight: 200;
      line-height: 1.2;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 2rem;
      line-height: 1;
      cursor: pointer;
      padding: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--gray-600);
      transition: color 0.2s;
    }

    .modal-close:hover {
      color: var(--black);
    }

    .form {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-label {
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--gray-600);
    }

    .form-input,
    .form-textarea {
      padding: 1rem;
      border: 1px solid var(--gray-300);
      background: var(--white);
      font-family: inherit;
      font-size: 1rem;
      color: var(--black);
      transition: border-color 0.2s;
    }

    .form-input:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--black);
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    .form-submit {
      align-self: flex-start;
      background: var(--black);
      color: var(--white);
      border: 2px solid var(--black);
      padding: 1rem 2.5rem;
      font-family: inherit;
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.2s;
    }

    .form-submit:hover {
      background: var(--white);
      color: var(--black);
    }

    @media (max-width: 640px) {
      .modal-content {
        padding: 2rem 1.5rem;
      }

      .modal-title {
        font-size: 1.5rem;
      }

      .form-submit {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="header-content">
      <picture>
        <source srcset="logo-lockup-dark.webp" type="image/webp">
        <img src="logo-lockup-dark.png" alt="Crown Dev Studios" class="logo">
      </picture>
      <button class="nav-button" onclick="scrollToCTA()">Work With Us</button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="hero-grid">
          <div class="hero-content">
            <h1>
              Build. Scale. <strong>Succeed.</strong>
            </h1>
            <p>Brooklyn-based software consultancy. We turn complex technical challenges into elegant, scalable solutions.</p>
          </div>
          <div class="hero-visual">
            <canvas id="networkCanvas"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section class="tech-stack">
      <div class="container">
        <div class="section-title">Our Expertise</div>
        <div class="tech-list">
          <div class="tech-item">TypeScript</div>
          <div class="tech-item">Golang</div>
          <div class="tech-item">Kotlin</div>
          <div class="tech-item">Swift</div>
          <div class="tech-item">React</div>
          <div class="tech-item">Svelte</div>
          <div class="tech-item">Web Components</div>
          <div class="tech-item">iOS</div>
          <div class="tech-item">Android</div>
          <div class="tech-item">Node.js</div>
          <div class="tech-item">AWS</div>
          <div class="tech-item">GCP</div>
          <div class="tech-item">SQL</div>
          <div class="tech-item">NoSQL</div>
          <div class="tech-item">Redis</div>
          <div class="tech-item">Docker</div>
          <div class="tech-item">Terraform</div>
          <div class="tech-item">GraphQL</div>
        </div>
      </div>
    </section>

    <section class="services">
      <div class="container">
        <div class="section-title">What We Do</div>
        <div class="services-grid">
          <div class="service-card">
            <div class="service-number">01</div>
            <h3>Custom Development</h3>
            <p>Stuck with off-the-shelf solutions that don't fit? We build software tailored to your exact workflow that scales with your vision.</p>
          </div>
          <div class="service-card">
            <div class="service-number">02</div>
            <h3>Technical Strategy</h3>
            <p>Uncertain which technologies to bet on? Get expert guidance on architecture decisions that set you up for long-term success.</p>
          </div>
          <div class="service-card">
            <div class="service-number">03</div>
            <h3>System Integration</h3>
            <p>Drowning in disconnected tools? We unify your platforms and APIs into a seamless ecosystem that just works.</p>
          </div>
          <div class="service-card">
            <div class="service-number">04</div>
            <h3>Performance Optimization</h3>
            <p>Slowing down as you scale? We refactor and optimize your applications to handle growth without breaking the bank.</p>
          </div>
          <div class="service-card">
            <div class="service-number">05</div>
            <h3>Migration Services</h3>
            <p>Trapped in legacy tech? We modernize your systems and migrate platforms without disrupting your business operations.</p>
          </div>
          <div class="service-card">
            <div class="service-number">06</div>
            <h3>Technical Due Diligence</h3>
            <p>Considering an acquisition? Get comprehensive code reviews and technical assessments that reveal the true state of the technology.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="process">
      <div class="container">
        <div class="section-title">How We Work</div>
        <div class="process-timeline">
          <div class="process-step">
            <div class="process-number">1</div>
            <h3>Discovery</h3>
            <p>We dive deep into your challenges, goals, and technical landscape.</p>
          </div>
          <div class="process-step">
            <div class="process-number">2</div>
            <h3>Strategy</h3>
            <p>We design the architecture and technology approach that fits your needs.</p>
          </div>
          <div class="process-step">
            <div class="process-number">3</div>
            <h3>Execution</h3>
            <p>We build with precision, keeping you informed every step of the way.</p>
          </div>
          <div class="process-step">
            <div class="process-number">4</div>
            <h3>Support</h3>
            <p>We ensure smooth deployment and provide ongoing optimization.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="cta-section">
      <div class="container">
        <h2>Have a technical challenge?<br>Let's solve it together.</h2>
        <button class="cta-button" onclick="openModal()">
          <span>Start a Project</span>
          <svg class="cta-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
    </section>
  </main>

  <dialog id="projectModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Start a Project</h3>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <form class="form" onsubmit="handleSubmit(event)">
        <div class="form-group">
          <label class="form-label" for="name">Name *</label>
          <input type="text" id="name" name="name" class="form-input" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="email">Email *</label>
          <input type="email" id="email" name="email" class="form-input" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="company">Company</label>
          <input type="text" id="company" name="company" class="form-input">
        </div>
        <div class="form-group">
          <label class="form-label" for="project">Project Details *</label>
          <textarea id="project" name="project" class="form-textarea" placeholder="Tell us about your project..." required></textarea>
        </div>
        <button type="submit" class="form-submit">Send Message</button>
      </form>
    </div>
  </dialog>

  <footer>
    <div class="footer-content">
      <div>
        <picture>
          <source srcset="/logo-lockup-light.webp" type="image/webp">
          <img src="/logo-lockup-light.png" alt="Crown Dev Studios" class="footer-logo">
        </picture>
        <p class="footer-text">A Brooklyn-based software consultancy turning complex technical challenges into elegant, scalable solutions.</p>
      </div>
      <div class="footer-section">
        <h4>Expertise</h4>
        <ul class="footer-links">
          <li>TypeScript · Golang · Kotlin · Swift</li>
          <li>React · Svelte · Web Components</li>
          <li>SQL · NoSQL · Redis</li>
          <li>AWS · GCP · Docker · Terraform</li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Contact</h4>
        <ul class="footer-links">
          <li><a href="mailto:hi@crown.dev">hi@crown.dev</a></li>
          <li>Brooklyn, NY</li>
          <li><a href="#" onclick="openModal(); return false;">Quick Start →</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <div>&copy; 2024 Crown Dev Studios</div>
      <div>Crafted with precision in Brooklyn</div>
    </div>
  </footer>

  <script>
    function scrollToCTA() {
      document.querySelector('.cta-section').scrollIntoView({ behavior: 'smooth' });
    }

    function openModal() {
      document.getElementById('projectModal').showModal();
    }

    function closeModal() {
      document.getElementById('projectModal').close();
    }

    function handleSubmit(event) {
      event.preventDefault();

      // Get form values
      const formData = new FormData(event.target);
      const name = formData.get('name');
      const email = formData.get('email');
      const company = formData.get('company');
      const project = formData.get('project');

      // Build email body
      const subject = encodeURIComponent(`New Project Inquiry from ${name}`);
      const body = encodeURIComponent(
        `Name: ${name}\n` +
        `Email: ${email}\n` +
        (company ? `Company: ${company}\n` : '') +
        `\nProject Details:\n${project}`
      );

      // Open default mail client
      window.location.href = `mailto:hi@crown.dev?subject=${subject}&body=${body}`;

      // Close modal and reset form
      closeModal();
      event.target.reset();
    }

    document.getElementById('projectModal').addEventListener('click', function(event) {
      if (event.target === this) {
        closeModal();
      }
    });

    // Neural Network Visualization
    const canvas = document.getElementById('networkCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let nodes = [];
    let connections = [];
    let mouse = { x: null, y: null };
    let pulses = [];
    let shapePropagation = null;
    let nextShapeChangeTime = 0;
    let burstParticles = [];

    function resizeCanvas() {
      const container = canvas.parentElement;
      const dpr = window.devicePixelRatio || 1;

      width = container.offsetWidth;
      height = container.offsetHeight;

      // Set canvas size accounting for device pixel ratio
      canvas.width = width * dpr;
      canvas.height = height * dpr;
      canvas.style.width = width + 'px';
      canvas.style.height = height + 'px';

      // Scale context to match device pixel ratio
      ctx.scale(dpr, dpr);

      initNetwork();
    }

    class Node {
      constructor(x, y, layer, totalInLayer) {
        this.baseX = x;
        this.baseY = y;
        this.x = x;
        this.y = y;
        this.layer = layer;
        this.radius = layer === 1 || layer === 2 ? 5 : 4;
        this.vx = (Math.random() - 0.5) * 0.2;
        this.vy = (Math.random() - 0.5) * 0.2;
        this.pulsePhase = Math.random() * Math.PI * 2;
        this.pulseSpeed = 0.02 + Math.random() * 0.01;
        this.isAccent = layer === 1 && totalInLayer > 2 && Math.random() > 0.5;
        this.shape = 'circle'; // circle, square, triangle
        this.shapeTransition = 0; // 0 to 1
        this.targetShape = 'circle';
        this.rotation = Math.random() * Math.PI * 2;
        this.rotationSpeed = (Math.random() - 0.5) * 0.006; // Much slower rotation
        this.scaleBoost = 0;
        this.colorFlash = 0;
      }

      update(time) {
        // Gentle floating
        this.x += this.vx;
        this.y += this.vy;

        const dx = this.baseX - this.x;
        const dy = this.baseY - this.y;
        this.x += dx * 0.015;
        this.y += dy * 0.015;

        // Mouse interaction - attraction/repulsion based on distance
        if (mouse.x !== null && mouse.y !== null) {
          const distX = mouse.x - this.x;
          const distY = mouse.y - this.y;
          const dist = Math.sqrt(distX * distX + distY * distY);

          // Reduce intensity when mouse is outside canvas
          const intensity = mouse.isOverCanvas ? 1 : 0.3;

          if (dist < 80) {
            // Repel when very close
            const force = (80 - dist) / 80;
            this.x -= distX * force * 0.05 * intensity;
            this.y -= distY * force * 0.05 * intensity;
          } else if (dist < 180) {
            // Gentle attraction in mid-range
            const force = (dist - 80) / 100;
            this.x += distX * force * 0.008 * intensity;
            this.y += distY * force * 0.008 * intensity;
          }
        }

        this.pulsePhase += this.pulseSpeed;
        this.rotation += this.rotationSpeed;

        // Smooth shape transition
        if (this.shape !== this.targetShape) {
          this.shapeTransition += 0.03;
          if (this.shapeTransition >= 1) {
            this.shapeTransition = 0;
            this.shape = this.targetShape;
          }
        }

        // Decay scale boost and color flash
        if (this.scaleBoost > 0) {
          this.scaleBoost *= 0.92;
          if (this.scaleBoost < 0.01) this.scaleBoost = 0;
        }
        if (this.colorFlash > 0) {
          this.colorFlash *= 0.9;
          if (this.colorFlash < 0.01) this.colorFlash = 0;
        }
      }

      setTargetShape(shape) {
        if (this.targetShape !== shape && this.shape === this.targetShape) {
          this.targetShape = shape;
          this.shapeTransition = 0;
          this.scaleBoost = 0.4; // Bounce on change
          this.colorFlash = 1; // Flash orange
        }
      }

      draw(time) {
        const pulse = Math.sin(this.pulsePhase) * 0.3 + 1;
        const drawRadius = this.radius * pulse * (1 + this.scaleBoost);

        // Enhanced glow for accent nodes and flash effect
        const baseColor = this.isAccent ? '#ff9533' : '#000000';
        const flashColor = '#ff9533';

        if (this.isAccent || this.colorFlash > 0) {
          ctx.shadowBlur = 10 + this.colorFlash * 10;
          ctx.shadowColor = '#ff9533';
        }

        ctx.save();
        ctx.translate(this.x, this.y);

        // Interpolate between shapes during transition
        const t = this.shapeTransition;
        const currentShape = this.shape;
        const nextShape = this.targetShape;

        if (currentShape === nextShape || t === 0) {
          // Draw single shape
          this.drawShape(currentShape, drawRadius, baseColor, flashColor);
        } else {
          // Blend between shapes during transition
          ctx.globalAlpha = 1 - t;
          this.drawShape(currentShape, drawRadius, baseColor, flashColor);
          ctx.globalAlpha = t;
          this.drawShape(nextShape, drawRadius, baseColor, flashColor);
          ctx.globalAlpha = 1;
        }

        ctx.restore();
        ctx.shadowBlur = 0;
      }

      drawShape(shape, radius, baseColor, flashColor) {
        // Blend color based on flash
        if (this.colorFlash > 0) {
          const r1 = 0, g1 = 0, b1 = 0; // black
          const r2 = 255, g2 = 149, b2 = 51; // orange
          const r = Math.round(r1 + (r2 - r1) * this.colorFlash);
          const g = Math.round(g1 + (g2 - g1) * this.colorFlash);
          const b = Math.round(b1 + (b2 - b1) * this.colorFlash);
          ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;
        } else {
          ctx.fillStyle = baseColor;
        }

        if (shape === 'circle') {
          ctx.beginPath();
          ctx.arc(0, 0, radius, 0, Math.PI * 2);
          ctx.fill();
        } else if (shape === 'square') {
          ctx.save();
          ctx.rotate(this.rotation);
          const size = radius * 1.6;
          ctx.fillRect(-size / 2, -size / 2, size, size);
          ctx.restore();
        } else if (shape === 'triangle') {
          ctx.save();
          ctx.rotate(this.rotation);
          const size = radius * 2;
          ctx.beginPath();
          ctx.moveTo(0, -size / 2);
          ctx.lineTo(size / 2, size / 2);
          ctx.lineTo(-size / 2, size / 2);
          ctx.closePath();
          ctx.fill();
          ctx.restore();
        }
      }
    }

    class Connection {
      constructor(node1, node2) {
        this.node1 = node1;
        this.node2 = node2;
        this.weight = 0.5 + Math.random() * 0.5;
        this.baseOpacity = 0.08 + this.weight * 0.08;
        this.propagationGlow = 0;
      }

      update() {
        // Decay propagation glow
        if (this.propagationGlow > 0) {
          this.propagationGlow *= 0.88;
          if (this.propagationGlow < 0.01) this.propagationGlow = 0;
        }
      }

      activatePropagation() {
        this.propagationGlow = 1;
      }

      draw() {
        const dist = mouse.x !== null ?
          Math.min(
            Math.hypot(mouse.x - this.node1.x, mouse.y - this.node1.y),
            Math.hypot(mouse.x - this.node2.x, mouse.y - this.node2.y)
          ) : 999;

        let opacity = this.baseOpacity;
        let lineWidth = this.weight * 1.5;

        // Reduce intensity when mouse is outside canvas
        const intensity = mouse.isOverCanvas !== false ? 1 : 0.3;

        if (dist < 120) {
          const proximity = (120 - dist) / 120;
          opacity = this.baseOpacity + proximity * 0.3 * intensity;
          lineWidth += proximity * 1.5 * intensity;

          // Glow effect on hover
          if (dist < 80 && mouse.isOverCanvas) {
            ctx.shadowBlur = 8;
            ctx.shadowColor = 'rgba(255, 149, 51, 0.3)';
          }
        }

        // Propagation glow effect
        if (this.propagationGlow > 0) {
          opacity = Math.max(opacity, 0.4 * this.propagationGlow);
          lineWidth = Math.max(lineWidth, 3 * this.propagationGlow);
          ctx.shadowBlur = 15 * this.propagationGlow;
          ctx.shadowColor = `rgba(255, 149, 51, ${0.8 * this.propagationGlow})`;
        }

        ctx.beginPath();
        ctx.moveTo(this.node1.x, this.node1.y);
        ctx.lineTo(this.node2.x, this.node2.y);

        if (this.propagationGlow > 0) {
          ctx.strokeStyle = `rgba(255, 149, 51, ${opacity})`;
        } else {
          ctx.strokeStyle = `rgba(0, 0, 0, ${opacity})`;
        }

        ctx.lineWidth = lineWidth;
        ctx.stroke();

        ctx.shadowBlur = 0;
      }
    }

    class Pulse {
      constructor(startNode) {
        this.currentNodes = [startNode];
        this.visitedNodes = new Set([startNode]);
        this.progress = 0;
        this.speed = 0.08;
        this.opacity = 1;
      }

      update() {
        this.progress += this.speed;

        if (this.progress >= 1) {
          this.progress = 0;
          const nextNodes = [];

          this.currentNodes.forEach(node => {
            connections.forEach(conn => {
              if (conn.node1 === node && !this.visitedNodes.has(conn.node2)) {
                nextNodes.push(conn.node2);
                this.visitedNodes.add(conn.node2);
              }
            });
          });

          this.currentNodes = nextNodes;
          this.opacity *= 0.7;
        }

        return this.currentNodes.length > 0 && this.opacity > 0.1;
      }

      draw() {
        this.currentNodes.forEach(node => {
          const pulseRadius = 8 + this.progress * 6;
          ctx.beginPath();
          ctx.arc(node.x, node.y, pulseRadius, 0, Math.PI * 2);
          ctx.strokeStyle = `rgba(255, 149, 51, ${this.opacity * (1 - this.progress)})`;
          ctx.lineWidth = 2;
          ctx.stroke();
        });
      }
    }

    function initNetwork() {
      nodes = [];
      connections = [];

      const layers = [3, 5, 5, 3];
      const layerSpacing = width / (layers.length + 1);

      layers.forEach((nodeCount, layerIndex) => {
        const baseSpacing = height / (nodeCount + 1);
        for (let i = 0; i < nodeCount; i++) {
          const x = layerSpacing * (layerIndex + 1);
          // Add organic randomness to y position
          const yOffset = (Math.random() - 0.5) * baseSpacing * 0.3;
          const y = baseSpacing * (i + 1) + yOffset;
          nodes.push(new Node(x, y, layerIndex, nodeCount));
        }
      });

      // Create connections - ensure all nodes connected
      let nodeIndex = 0;
      for (let layer = 0; layer < layers.length - 1; layer++) {
        const currentLayerCount = layers[layer];
        const nextLayerCount = layers[layer + 1];
        const currentLayerStart = nodeIndex;
        const nextLayerStart = nodeIndex + currentLayerCount;

        // Track which nodes have connections
        const currentConnected = new Set();
        const nextConnected = new Set();

        // First pass: create selective connections
        for (let i = 0; i < currentLayerCount; i++) {
          for (let j = 0; j < nextLayerCount; j++) {
            if (Math.random() < 0.65) {
              const conn = new Connection(
                nodes[currentLayerStart + i],
                nodes[nextLayerStart + j]
              );
              connections.push(conn);
              currentConnected.add(i);
              nextConnected.add(j);
            }
          }
        }

        // Second pass: ensure all nodes have at least one connection
        for (let i = 0; i < currentLayerCount; i++) {
          if (!currentConnected.has(i)) {
            const j = Math.floor(Math.random() * nextLayerCount);
            const conn = new Connection(
              nodes[currentLayerStart + i],
              nodes[nextLayerStart + j]
            );
            connections.push(conn);
            nextConnected.add(j);
          }
        }

        for (let j = 0; j < nextLayerCount; j++) {
          if (!nextConnected.has(j)) {
            const i = Math.floor(Math.random() * currentLayerCount);
            const conn = new Connection(
              nodes[currentLayerStart + i],
              nodes[nextLayerStart + j]
            );
            connections.push(conn);
          }
        }

        nodeIndex += currentLayerCount;
      }
    }

    class BurstParticle {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        const angle = Math.random() * Math.PI * 2;
        const speed = 1 + Math.random() * 2;
        this.vx = Math.cos(angle) * speed;
        this.vy = Math.sin(angle) * speed;
        this.life = 1;
        this.size = 2 + Math.random() * 2;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.vx *= 0.95;
        this.vy *= 0.95;
        this.life *= 0.94;
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size * this.life, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 149, 51, ${this.life * 0.8})`;
        ctx.fill();
      }
    }

    class ShapePropagation {
      constructor(startNode, targetShape) {
        this.currentNodes = [startNode];
        this.visitedNodes = new Set([startNode]);
        this.targetShape = targetShape;
        this.progress = 0;
        this.speed = 0.05;
        this.delayBetweenLayers = 20; // frames
        this.frameCount = 0;

        startNode.setTargetShape(targetShape);
        this.createBurst(startNode);
      }

      createBurst(node) {
        for (let i = 0; i < 8; i++) {
          burstParticles.push(new BurstParticle(node.x, node.y));
        }
      }

      update() {
        this.frameCount++;

        if (this.frameCount >= this.delayBetweenLayers) {
          this.frameCount = 0;
          const nextNodes = [];

          this.currentNodes.forEach(node => {
            connections.forEach(conn => {
              if (conn.node1 === node && !this.visitedNodes.has(conn.node2)) {
                nextNodes.push(conn.node2);
                this.visitedNodes.add(conn.node2);
                conn.node2.setTargetShape(this.targetShape);
                conn.activatePropagation(); // Light up the connection
                this.createBurst(conn.node2); // Burst on new node
              }
            });
          });

          this.currentNodes = nextNodes;
        }

        return this.currentNodes.length > 0 || this.frameCount > 0;
      }
    }

    function triggerShapeChange() {
      if (!shapePropagation && nodes.length > 0) {
        // Pick random node and random shape
        const randomNode = nodes[Math.floor(Math.random() * nodes.length)];
        const shapes = ['circle', 'square', 'triangle'];
        const currentShape = randomNode.shape;
        const availableShapes = shapes.filter(s => s !== currentShape);
        const newShape = availableShapes[Math.floor(Math.random() * availableShapes.length)];

        shapePropagation = new ShapePropagation(randomNode, newShape);
      }
    }

    let time = 0;
    function animate() {
      time += 0.016;
      ctx.clearRect(0, 0, width, height);

      // Trigger shape changes periodically
      if (time > nextShapeChangeTime && !shapePropagation) {
        triggerShapeChange();
        nextShapeChangeTime = time + 5 + Math.random() * 3; // Every 5-8 seconds
      }

      // Update shape propagation
      if (shapePropagation) {
        const alive = shapePropagation.update();
        if (!alive) {
          shapePropagation = null;
        }
      }

      // Update and draw connections
      connections.forEach(conn => {
        conn.update();
        conn.draw();
      });

      // Update and draw burst particles
      burstParticles = burstParticles.filter(bp => {
        bp.update();
        bp.draw();
        return bp.life > 0.05;
      });

      // Update and draw pulses
      pulses = pulses.filter(pulse => {
        const alive = pulse.update();
        if (alive) pulse.draw();
        return alive;
      });

      // Update and draw nodes
      nodes.forEach(node => {
        node.update(time);
        node.draw(time);
      });

      requestAnimationFrame(animate);
    }

    // Track mouse across entire page when canvas is in view
    document.addEventListener('mousemove', (e) => {
      const rect = canvas.getBoundingClientRect();
      const canvasInView = rect.top < window.innerHeight && rect.bottom > 0;

      if (canvasInView) {
        mouse.x = e.clientX - rect.left;
        mouse.y = e.clientY - rect.top;

        // Track if mouse is outside canvas bounds
        mouse.isOverCanvas =
          mouse.x >= 0 && mouse.x <= rect.width &&
          mouse.y >= 0 && mouse.y <= rect.height;
      } else {
        mouse.x = null;
        mouse.y = null;
        mouse.isOverCanvas = false;
      }
    });

    canvas.addEventListener('click', (e) => {
      const rect = canvas.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      const clickY = e.clientY - rect.top;

      // Find closest node to click
      let closestNode = null;
      let closestDist = Infinity;

      nodes.forEach(node => {
        const dist = Math.hypot(clickX - node.x, clickY - node.y);
        if (dist < closestDist && dist < 30) {
          closestDist = dist;
          closestNode = node;
        }
      });

      if (closestNode) {
        pulses.push(new Pulse(closestNode));
      }
    });

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    animate();
  </script>
</body>

</html>
